{"version":3,"sources":["../../../../src/app/typescripts/pro/material-select/option-list.ts"],"names":[],"mappings":"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","file":"option-list.js","sourceRoot":"","sourcesContent":["import {Option} from './option';\r\nimport {IOption} from './option-interface';\r\nimport {Diacritics} from './diacritics';\r\n\r\nexport class OptionList {\r\n\r\n  private _options: Array<Option>;\r\n\r\n  /* Consider using these for performance improvement. */\r\n  // private _selection: Array<Option>;\r\n  // private _filtered: Array<Option>;\r\n  // private _value: Array<string>;\r\n\r\n  private _highlightedOption: Option = null;\r\n  private _hasShown: boolean;\r\n\r\n  // v0 and v1 are assumed not to be undefined or null.\r\n  static equalValues(v0: Array<string>, v1: Array<string>): boolean {\r\n\r\n    if (v0.length !== v1.length) {\r\n      return false;\r\n    }\r\n\r\n    const a: Array<string> = v0.slice().sort();\r\n    const b: Array<string> = v1.slice().sort();\r\n\r\n    return a.every((v, i) => {\r\n      return v === b[i];\r\n    });\r\n  }\r\n\r\n  constructor(options: Array<IOption>) {\r\n\r\n    if (typeof options === 'undefined' || options === null) {\r\n      options = [];\r\n    }\r\n\r\n    this._options = options.map((option) => {\r\n      const o: Option = new Option(option);\r\n      if (option.disabled) {\r\n        o.disabled = true;\r\n      }\r\n      if (option.group) {\r\n        o.disabled = true;\r\n        o.group = true;\r\n      }\r\n      return o;\r\n    });\r\n\r\n    this._hasShown = this._options.length > 0;\r\n    this.highlight();\r\n  }\r\n\r\n  /** Options. **/\r\n\r\n  get options(): Array<Option> {\r\n    return this._options;\r\n  }\r\n\r\n  getOptionsByValue(value: string): Array<Option> {\r\n    return this.options.filter((option) => {\r\n      return option.value === value;\r\n    });\r\n  }\r\n\r\n  /** Value. **/\r\n\r\n  get value(): Array<string> {\r\n    return this.selection.map((selectedOption) => {\r\n      return selectedOption.value;\r\n    });\r\n  }\r\n\r\n  set value(v: Array<string>) {\r\n    v = typeof v === 'undefined' || v === null ? [] : v;\r\n\r\n    this.options.forEach((option) => {\r\n      option.selected = v.indexOf(option.value) > -1;\r\n    });\r\n  }\r\n\r\n  /** Selection. **/\r\n\r\n  get selection(): Array<Option> {\r\n    return this.options.filter((option) => {\r\n      return option.selected;\r\n    });\r\n  }\r\n\r\n  select(option: Option, multiple: boolean) {\r\n    if (!multiple) {\r\n      this.clearSelection();\r\n    }\r\n    option.selected = true;\r\n  }\r\n\r\n  deselect(option: Option) {\r\n    option.selected = false;\r\n  }\r\n\r\n  clearSelection() {\r\n    this.options.forEach((option) => {\r\n      option.selected = false;\r\n    });\r\n  }\r\n\r\n  /** Filter. **/\r\n\r\n  get filtered(): Array<Option> {\r\n    return this.options.filter((option) => {\r\n      return option.shown;\r\n    });\r\n  }\r\n\r\n  filter(term: string): boolean {\r\n    let anyShown = false;\r\n\r\n    if (term.trim() === '') {\r\n      this.resetFilter();\r\n      anyShown = this.options.length > 0;\r\n    } else {\r\n      this.options.forEach((option) => {\r\n        const l: string = Diacritics.strip(option.label).toUpperCase();\r\n        const t: string = Diacritics.strip(term).toUpperCase();\r\n        option.shown = l.indexOf(t) > -1;\r\n      });\r\n\r\n    }\r\n\r\n    this.highlight();\r\n    this._hasShown = anyShown;\r\n\r\n    return anyShown;\r\n  }\r\n\r\n  private resetFilter() {\r\n    this.options.forEach((option) => {\r\n      option.shown = true;\r\n    });\r\n  }\r\n\r\n  /** Highlight. **/\r\n\r\n  get highlightedOption(): Option {\r\n    return this._highlightedOption;\r\n  }\r\n\r\n  highlight() {\r\n    const option: Option = this.hasShownSelected() ?\r\n      this.getFirstShownSelected() : this.getFirstShown();\r\n    this.highlightOption(option);\r\n  }\r\n\r\n  highlightOption(option: Option) {\r\n    this.clearHighlightedOption();\r\n\r\n    if (option !== null) {\r\n      option.highlighted = true;\r\n      this._highlightedOption = option;\r\n    }\r\n  }\r\n\r\n  highlightNextOption() {\r\n    const shownOptions = this.filtered;\r\n    const index = this.getHighlightedIndexFromList(shownOptions);\r\n\r\n    if (index > -1 && index < shownOptions.length - 1) {\r\n      this.highlightOption(shownOptions[index + 1]);\r\n    }\r\n  }\r\n\r\n  highlightPreviousOption() {\r\n    const shownOptions = this.filtered;\r\n    const index = this.getHighlightedIndexFromList(shownOptions);\r\n\r\n    if (index > 0) {\r\n      this.highlightOption(shownOptions[index - 1]);\r\n    }\r\n  }\r\n\r\n  private clearHighlightedOption() {\r\n    if (this.highlightedOption !== null) {\r\n      this.highlightedOption.highlighted = false;\r\n      this._highlightedOption = null;\r\n    }\r\n  }\r\n\r\n  private getHighlightedIndexFromList(options: Array<Option>) {\r\n    for (let i = 0; i < options.length; i++) {\r\n      if (options[i].highlighted) {\r\n        return i;\r\n      }\r\n    }\r\n    return -1;\r\n  }\r\n\r\n  getHighlightedIndex() {\r\n    return this.getHighlightedIndexFromList(this.filtered);\r\n  }\r\n\r\n  /** Util. **/\r\n\r\n  get hasShown(): boolean {\r\n    return this._hasShown;\r\n  }\r\n\r\n  hasSelected() {\r\n    return this.options.some((option) => {\r\n      return option.selected;\r\n    });\r\n  }\r\n\r\n  hasShownSelected() {\r\n    return this.options.some((option) => {\r\n      return option.shown && option.selected;\r\n    });\r\n  }\r\n\r\n  private getFirstShown(): Option {\r\n    for (const option of this.options) {\r\n      if (option.shown) {\r\n        return option;\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  private getFirstShownSelected(): Option {\r\n    for (const option of this.options) {\r\n      if (option.shown && option.selected) {\r\n        return option;\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n}\r\n"]}